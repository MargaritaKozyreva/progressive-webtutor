# Запуск WebTutor в режиме IIS

1. Для удобства, создадим на рабочем столе 3 ярлыка WebTutor Server \(C:\Program Files\WebSoft\WebTutorServer\SpXml.exe\), WebTutor Administrator \(C:\Program Files\WebSoft\WebTutorAdmin\spxml.exe\) и IIS \(%windir%\system32\inetsrv\InetMgr.exe\)
2. Переходим в IIS и удаляем там существующие сайты, чтобы ничего не занимало 80 порт. Порт 80 и другие порты, которые вы захотите использовать, могут занимать и другие программы \(к примеру Skype, SQL Server Reporting Service, итд любят занимать 80 порт\), так что всегда имейте это ввиду и если у вас что-то не будет работать, то возможно ваш порт уже занят какой-то другой программой.
3. Запускаем WebTutor Server, жмем на флаг России
4. В появившемся окне, жмем No \(Нет\)
5. В закладке Режим работы, ставим галку напротив IIS, в поле порт пишем 8787, жмем Переключить режим
   \(можно задать любой другой свободный порт на свое усмотрение, хотя тут было бы логично задать порт 80 или 443, но это необязательно и мы не будем трогать эти стандартные порты, так как они в будущем скорее всего пригодятся для чего-нибудь еще\)
6. В появившемся окне жмем Yes \(Да\)
7. После переключения в IIS в Application Pools \(Пулы приложений\) и в Sites \(Сайты\) появится WebTutorCorpServer 
8. Перейдите в Application Pools \(Пулы приложений\), нажмите на WebTutorCorpServer, затем справа на Advanced Settings... \(Дополнительные параметры...\)
9. Установите значения следующих параметров  
   **Idle Timeout** = 0  
   **Queue Length** = 10 000  
   **Start Mode** = «Always Running»  
   **Regular Time Interval** = 0

10. Если используется англоязычная версия Windows, то в параметре Identity укажите учетную запись администратора, под которой будет запускаться пул

11. Нажмите OK

12. Перейдите в Sites \(Сайты\), нажмите на WebTutorCorpServer, по центру на Handler Mappings \(Сопоставление обработчиков\), затем нажмите на Add Module Mapping \(Добавить сопоставление модуля\)
13. В открывшемся окне заполните поля  
    **Request path \(Путь запроса\)** = \*  
    **Module \(Модуль\)** = IsapiModule  
    **Executable \(Исполняемый файл\)** = файл IsapiSpx.dll для 32-битных или IsapiSpx\_64.dll - для 64-битных операционных систем \(файлы находятся тут C:\Program Files\WebSoft\WebTutorServer\)  
    **Name \(Имя\)** - WebTutorServer

    Для IIS версий 8.0 и выше откройте пункт Request Restictions, перейдите на вкладку Mapping и выключите флажок Invoke handler only....

14. Нажмите ОК

15. В появившемся окне нажмите ОК

16. Перейдите в Sites \(Сайты\), нажмите на WebTutorCorpServer, по центру войдите в RequestFiltering \(Фильтрация запросов\)

17. Затем нажмите на  Edit Feature Settings \(Изменить параметры\)

18. В поле Maximum allowed content lenghth \(Максимальная допустимая длина содержимого\) напишите 30000000 и нажмите OK
19. Перейдите в главное меню IIS
20. Войдите в раздел Server Certificates \(Сертификаты\)
21. Нажмите Create Self-Signed Certificate... \(Создать само-подписанный сертификат\)
22. В появившемся окне нажмите WebTutorTestSystemCertificate и нажмите OK
23. Перейдите в Application Pools \(Пулы приложений\), нажмите на WebTutorCorpServer, затем справа нажмите на Bindings... \(Привязки...\)
24. Нажмите Add... \(Добавить\)
25. В открывшемся окне заполните поля и нажмите OK  
    **Type \(Тип\)** = https  
    **IP address \(IP адрес\)** = All Unassigned  
    **Port \(Порт\)** = 8989  
    **SSL certificate \(SSL сертификат\)** = WebTutorTestSystemCertificate

26. Выделите строку в которой port = 8787 и нажмите Remove \(Удалить\)

27. Затем войдите в оставшуюся строку и смените там порт на 8989 на 8787

28. Нажмите Close

29. Зайдите в файл C:\Program Files\WebSoft\WebTutorAdmin\SpXml.ini и поменяйте там строку  
    \#LDS-HTTPS: 1 на LDS-HTTPS: 1 \(это необходимо для входа в WebTutor Administrator по протоколу https\)

30. В WebTutor Server на вкладке База данных переключаем Хранение данных на MS SQL и нажимаем на Мастер настройки базы данных

31. В открывшемся окне, заполните поля и нажмите Далее \(после этого начнется создание базы данных, это займет ~ 10 минут\)  
    **Сервер БД** = localhost\SQLEXPRESS  
    **Название БД** = wt  
    **Поставить галку: **Создание базы данных в случае отсутствия таковой  
    **Поставить галку:** Интегрированная авторизация



